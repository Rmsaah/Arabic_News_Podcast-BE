spring.application.name=Arabic News Podcast - BE

# --- Database (MySQL) Configuration ---
spring.datasource.url=jdbc:mysql://${MYSQL_HOST}:${MYSQL_PORT}/${MYSQL_DATABASE}
spring.datasource.username=${MYSQL_USERNAME}
spring.datasource.password=${MYSQL_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect


# --- JPA / Hibernate ---
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true


# --- Flyway Database Migrations ---
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.default-schema=${MYSQL_DATABASE}

# --- Server ---
server.port=8080


# --- CORS Configuration (for Angular Frontend) ---
# Allowed origins - add your Angular dev server and production URLs
# For development: http://localhost:4200 (default Angular dev server)
# For production: add your deployed frontend URL
app.cors.allowed-origins=http://localhost:4200,http://localhost:3000
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
app.cors.allowed-headers=*
app.cors.allow-credentials=true
app.cors.max-age=3600


# --- Logging ---
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.orm.jdbc.bind=TRACE


# --- Audio Streaming Configuration ---
# How long audio URLs should be valid (in hours)
# Only applies when using signed URLs (app.audio.use-signed-urls=true)
app.audio.url-expiration-hours=24

# Use signed URLs for audio streaming?
# - false (default): Returns direct public GCS URLs - FAST, recommended for public podcasts
# - true: Returns signed URLs that expire - For private/paid content
app.audio.use-signed-urls=false


# --- Google Cloud Storage Configuration ---
# DISABLED for local development - Enable when you have GCS credentials
spring.cloud.gcp.storage.enabled=false
spring.cloud.gcp.core.enabled=false

# Set your GCP bucket name here
gcp.storage.bucket-name=your-podcast-bucket-name
# spring.cloud.gcp.credentials.location=file:C:/Users/ahmed&zoze&amal/Desktop/GP2/code/backend/springboot/Arabic_News_Podcast-BE/my-project-13432-1697197991822-214b7e7c91cf.json
# spring.cloud.gcp.project-id=my-project-13432-1697197991822

# Whether to make uploaded files publicly readable
# - true (default): Files are public, direct URLs work - Best performance
# - false: Files are private, requires signed URLs - For private content
gcp.storage.make-public=true

# Note: Authentication is handled via Application Default Credentials (ADC)
# For local development: run `gcloud auth application-default login`
# For production: set GOOGLE_APPLICATION_CREDENTIALS environment variable to point to service account key JSON


# --- Episode Automation Configuration ---
# Directory where JSON files can be processed from (for security)
# Only files within this directory can be accessed via /process-file endpoint
app.automation.allowed-directory=/tmp/episodes

# Maximum file size for JSON uploads (in MB)
app.automation.max-file-size-mb=10


# --- Jackson JSON Configuration ---
# Serialize dates as ISO-8601 strings (not timestamps)
spring.jackson.serialization.write-dates-as-timestamps=false
# Use UTC timezone for all date serialization
spring.jackson.time-zone=UTC
# Pretty print JSON in development (disable in production for smaller payloads)
spring.jackson.serialization.indent-output=true